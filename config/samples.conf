[Data]
# ODPS 项目与样本表（你给的是 autonavi_traffic_report.tb_patchstg_train_samples_full）
odps_project = autonavi_traffic_report
odps_table   = tb_patchstg_train_samples_full

# 训练使用的分区（按天），建议你按实际情况修改，例如 20251115
# 这个字段会传给 PatchSTGSampleLoader.ds_partition，用于 reader 的 partition 参数
# 例如：ds=20251115
# 如果你暂时不按 ds 切，就留空
# ds_partition = 20251115

ds_partition = 20251115

# 路口经纬度表，用于构建 KDTree 的 locations
inter_location_table = intersection_meta_1

# 训练/验证划分比例（针对 load_from_odps 预加载模式）
train_ratio = 0.7
val_ratio   = 0.1

# 是否使用 6 维时间特征：
#   - 目前模型只能吃 2 维 TE（和原版 tod/dow 一样），
#   - loader 会从 6 维 time_features 中取前 2 维（week, hour）对接模型。
use_6dim_time_feat = True


[Model]
# 输入输出长度（你的样本表就是基于 12 历史 + 12 预测构造的）
input_len  = 12
output_len = 12

# 时间 patch 配置（可以先沿用 main.py / ODPS.conf 中常用的一组参数）
tem_patchsize = 3
# 12 步 / 3 = 4 个 temporal patch
tem_patchnum  = 4

# 空间 patch 配置：每个 patch 的节点数，以及 patch 数量
# 这里给一个相对保守的默认值，你后面可以根据城市规模调整
spa_patchsize = 32
spa_patchnum  = 16

# 模型层数、注意力因子等（参考原 PatchSTG）
layers   = 2
factors  = 5
# 流量通道数
input_dims = 1  
# 节点嵌入维度    
node_dims  = 64  
# kdTree 划分深度（2^recurtimes 个 patch）   
recurtimes = 4      


[Training]
# 优化器参数
learning_rate = 0.001
weight_decay  = 0.0001

# 批大小和最大 epoch 数
batch_size = 32
max_epoch  = 50

# 可选：学习率里程碑与衰减因子（如果不写，则用 train_from_samples.py 中的默认值）
# milestones = 1,35,40
# lr_gamma   = 0.5


[Log]
# 日志和模型保存路径
# 注意：SampleSolver 会在文件名后自动加上时间戳
log_file   = log/train_from_samples.log
model_file = log/best_model_from_samples.pth
